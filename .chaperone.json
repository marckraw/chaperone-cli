{
  "version": "1.0.0",
  "rules": {
    "typescript": {
      "enabled": true
    },
    "eslint": {
      "enabled": true,
      "extensions": [
        ".ts",
        ".tsx",
        ".js",
        ".jsx"
      ]
    },
    "prettier": {
      "enabled": true
    },
    "custom": [
      {
        "id": "require-package-metadata",
        "severity": "warning",
        "type": "package-fields",
        "requiredFields": [
          "name",
          "version",
          "description"
        ],
        "message": "Package.json should have name, version, and description fields"
      },
      {
        "id": "no-npm-commands",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "Do NOT use npm, yarn, or pnpm",
        "type": "regex",
        "pattern": "\\bnpm\\s+(install|run|start|test|build)",
        "files": "**/*.{md,json,js,ts,sh,yml,yaml}",
        "exclude": [
          "CLAUDE.md",
          "**/*.md"
        ],
        "message": "Use 'bun' commands instead of npm. This project is built with Bun.",
        "mustMatch": false
      },
      {
        "id": "no-yarn-commands",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "Do NOT use npm, yarn, or pnpm",
        "type": "regex",
        "pattern": "\\byarn\\s+(install|run|start|test|build|add)",
        "files": "**/*.{md,json,js,ts,sh,yml,yaml}",
        "exclude": [
          "CLAUDE.md",
          "**/*.md"
        ],
        "message": "Use 'bun' commands instead of yarn. This project is built with Bun.",
        "mustMatch": false
      },
      {
        "id": "no-pnpm-commands",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "Do NOT use npm, yarn, or pnpm",
        "type": "regex",
        "pattern": "\\bpnpm\\s+(install|run|start|test|build|add)",
        "files": "**/*.{md,json,js,ts,sh,yml,yaml}",
        "exclude": [
          "CLAUDE.md",
          "**/*.md"
        ],
        "message": "Use 'bun' commands instead of pnpm. This project is built with Bun.",
        "mustMatch": false
      },
      {
        "id": "no-npx-usage",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "❌ `npx` → ✅ `bunx`",
        "type": "regex",
        "pattern": "\\bnpx\\s+",
        "files": "**/*.{md,json,js,ts,sh,yml,yaml}",
        "exclude": [
          "CLAUDE.md",
          "**/*.md"
        ],
        "message": "Use 'bunx' instead of npx. This project is built with Bun.",
        "mustMatch": false
      },
      {
        "id": "no-tsx-extension",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "Use `.ts` extension for all TypeScript files (no `.tsx` needed - this is a CLI tool)",
        "type": "regex",
        "pattern": "\\.tsx$",
        "files": "src/**/*",
        "message": "Use .ts extension for all TypeScript files. No .tsx needed - this is a CLI tool.",
        "mustMatch": false
      },
      {
        "id": "require-bun-runtime",
        "severity": "error",
        "source": "CLAUDE.md",
        "originalText": "ALWAYS use Bun",
        "type": "package-fields",
        "requiredFields": [
          "scripts.dev",
          "scripts.build"
        ],
        "fieldPatterns": {
          "scripts.dev": "^bun\\s+",
          "scripts.build": "^bun\\s+"
        },
        "message": "Package.json scripts must use 'bun' commands, not npm/yarn/pnpm"
      },

      {
        "id": "module-boundaries",
        "type": "import-boundary",
        "severity": "error",
        "layers": {
          "utils": {
            "files": "src/utils/**/*.ts",
            "allowImportsFrom": []
          },
          "presets": {
            "files": "src/presets/**/*.ts",
            "allowImportsFrom": ["check-types"]
          },
          "check-types": {
            "files": "src/check/types.ts",
            "allowImportsFrom": []
          },
          "check-rule-types": {
            "files": "src/check/rules/types.ts",
            "allowImportsFrom": ["check-types"]
          },
          "check-rules": {
            "files": "src/check/rules/*.ts",
            "allowImportsFrom": ["utils", "check-types", "check-rule-types"]
          },
          "check-runners": {
            "files": "src/check/runners/*.ts",
            "allowImportsFrom": ["utils", "check-types"]
          },
          "check-formatters": {
            "files": "src/check/formatters/*.ts",
            "allowImportsFrom": ["utils", "check-types"]
          },
          "check": {
            "files": "src/check/index.ts",
            "allowImportsFrom": ["utils", "check-types", "check-rules", "check-rule-types", "check-runners", "check-formatters"]
          }
        }
      },

      {
        "id": "module-structure",
        "type": "file-structure",
        "severity": "warning",
        "parentDirs": "src/*",
        "required": ["index.ts"],
        "strict": false,
        "message": "Each top-level module must have an index.ts barrel file"
      },

      {
        "id": "rule-runner-contract",
        "type": "file-contract",
        "severity": "error",
        "files": "src/check/rules/*.ts",
        "exclude": ["src/check/rules/index.ts", "src/check/rules/types.ts", "src/check/rules/ai-instructions.ts"],
        "assertions": {
          "mustBeModule": true,
          "mustExportNamed": true
        },
        "requiredPatterns": [
          "export async function run\\w+Rule",
          "export function is\\w+Rule"
        ],
        "message": "Rule files must export a runXxxRule async function and an isXxxRule type guard"
      },

      {
        "id": "utils-isolation",
        "type": "forbidden-import",
        "severity": "error",
        "files": "src/utils/**/*.ts",
        "restrictions": [
          {
            "source": "\\.\\./(check|init|analyze|presets)/",
            "allowedIn": [],
            "message": "Utils must not import from application modules (check, init, analyze, presets)"
          }
        ]
      },

      {
        "id": "rules-no-cross-module",
        "type": "forbidden-import",
        "severity": "error",
        "files": "src/check/rules/*.ts",
        "exclude": ["src/check/rules/index.ts"],
        "restrictions": [
          {
            "source": "\\.\\./(runners|formatters)/",
            "allowedIn": [],
            "message": "Rule implementations must not import from runners or formatters"
          }
        ]
      },

      {
        "id": "no-deprecated-paths",
        "type": "retired-path",
        "severity": "error",
        "paths": [
          {
            "pattern": "src/helpers/**/*",
            "reason": "Use src/utils/ for utility functions",
            "migratedTo": "src/utils/"
          },
          {
            "pattern": "src/lib/**/*",
            "reason": "Use src/utils/ for shared libraries",
            "migratedTo": "src/utils/"
          },
          {
            "pattern": "src/types/**/*",
            "reason": "Types belong in their module's types.ts file",
            "migratedTo": "src/<module>/types.ts"
          }
        ]
      }
    ]
  },
  "include": [
    "src/**/*"
  ],
  "exclude": [
    "node_modules",
    "dist",
    "build"
  ],
  "aiInstructions": {
    "autoDetect": true,
    "files": [
      "AGENTS.md",
      "CLAUDE.md",
      "GEMINI.md",
      "CODEX.md",
      ".cursorrules",
      ".cursor/rules/*.mdc",
      ".github/copilot-instructions.md",
      ".instructions.md"
    ],
    "extractRules": true
  },
  "project": {
    "typescript": {
      "detected": true,
      "configPath": "tsconfig.json",
      "settings": {
        "strict": true,
        "target": "ESNext"
      }
    },
    "eslint": {
      "detected": false
    },
    "prettier": {
      "detected": false
    },
    "packageManager": {
      "name": "bun",
      "lockfile": "bun.lockb"
    }
  },
  "integrations": {
    "respectEslintIgnore": false,
    "respectPrettierIgnore": false,
    "useTypescriptPaths": true
  }
}